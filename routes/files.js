// Generated by CoffeeScript 1.6.3
/* respone file  binary for restful url
*/


(function() {
  var fs, http, path, setting;

  http = require('http');

  path = require('path');

  fs = require('fs');

  setting = require('../config/setting');

  exports.show = function(req, res) {
    var fileId, realPath;
    fileId = req.params.id;
    fileId = '12.png';
    realPath = path.resolve(setting.rootPath() + 'assets/files/' + fileId);
    console.log('realPaht: ' + realPath);
    return fs.exists(realPath, function(exists) {
      if (!exists) {
        return res.send('No exist!');
      } else {
        return fs.readFile(realPath, 'binary', function(err, file) {
          if (err) {
            res.writeHead(500, {
              'Content-Type': 'text/html'
            });
            return res.end(err);
          } else {
            res.writeHead(200, {
              'Content-Type': 'text/html'
            });
            res.write(file, 'binary');
            return res.end();
          }
        });
      }
    });
  };

}).call(this);
